% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/openai_request_non_chat_services.R
\name{openai_request_non_chat_services}
\alias{openai_request_non_chat_services}
\title{Perform OpenAI Non-Chat Request}
\usage{
openai_request_non_chat_services(
  task = c("images", "embeddings", "tts", "stt"),
  body,
  base_url = "https://api.openai.com",
  path = NULL,
  api_key = Sys.getenv("OPENAI_API_KEY"),
  timeout = getOption("gptr.request_timeout", 30),
  retry_max = 3L,
  retry_backoff = function(i) 0.2 * i,
  ca_bundle = getOption("gptr.ca_bundle", NULL),
  expect = c("json", "binary"),
  ...
)
}
\arguments{
\item{task}{Type of service being requested. Determines the default API path
when \code{path} is not supplied. Must be one of \code{"images"}, \code{"embeddings"},
\code{"tts"}, or \code{"stt"}.}

\item{body}{Named list converted to JSON and sent as the request payload.}

\item{base_url}{Base URL of the OpenAI-compatible service.}

\item{path}{Optional override for the request path. Use when targeting
alternative or beta endpoints.}

\item{api_key}{API key (Bearer token) used for authentication.}

\item{timeout}{Request timeout in seconds passed to \code{httr2::req_timeout()}.}

\item{retry_max}{Maximum number of attempts performed by
\code{httr2::req_retry()}.}

\item{retry_backoff}{Function receiving the retry attempt index and returning
the delay (in seconds) before the next retry.}

\item{ca_bundle}{Optional path to a custom certificate bundle supplied to
\code{curl}.}

\item{expect}{Expected response body type. Use \code{"json"} for structured data
or \code{"binary"} when downloading media assets.}

\item{...}{Currently unused; reserved for future extension.}
}
\value{
If \code{expect} is \code{"binary"}, a list containing the raw payload,
response content type, and full \code{httr2} response object. Otherwise, the
parsed JSON content as an R list.
}
\description{
Construct and send a JSON request to an OpenAI-compatible endpoint for
non-chat services such as image generation, embeddings, text-to-speech, or
speech-to-text. The helper normalises base URLs, inserts authentication
headers, and handles retry logic.
}
\details{
When \code{path} is \code{NULL}, a task-specific default endpoint is selected.
The request body is serialized as JSON and sent using \code{httr2}. Responses
with status codes \verb{>= 400} raise an error with any message returned by the
API.
}
\keyword{internal}
